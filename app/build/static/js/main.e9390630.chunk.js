(this.webpackJsonpapp=this.webpackJsonpapp||[]).push([[0],{23:function(e,t,n){},26:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(0),a=n.n(r),s=n(8),i=n.n(s),l=(n(23),n(24),n(9)),o=n.n(l),j=n(11),d=n(6),u=(n(26),n(13)),b=n.n(u),h=n(16),O=n(12),x=n(14),p=n(15),f=n(17);function m(e){for(var t=e,n=0;t>=1024;)t/=1024,n++;return t.toFixed(2)/1+" "+["B","KB","MB","GB","TB"][n]}var v=function(){var e=Object(r.useState)(!1),t=Object(d.a)(e,2),n=t[0],a=t[1],s=Object(r.useState)(null),i=Object(d.a)(s,2),l=i[0],u=i[1],v=Object(r.useState)([]),y=Object(d.a)(v,2),g=y[0],k=y[1],S=Object(r.useState)(null),N=Object(d.a)(S,2),w=N[0],C=N[1],D=Object(r.useState)(null),B=Object(d.a)(D,2),z=B[0],F=B[1],E=Object(r.useState)(""),M=Object(d.a)(E,2),T=M[0],A=M[1],P=Object(r.useState)(""),I=Object(d.a)(P,2),J=I[0],K=I[1],U=Object(r.useState)(null),G=Object(d.a)(U,2),L=G[0],q=G[1],H=Object(r.useCallback)(function(){var e=Object(j.a)(o.a.mark((function e(t){var n,c,r,s,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new AbortController,c=n.signal,q(n),u(null),a(!0),e.prev=5,e.next=8,fetch("http://localhost:8002/?path=".concat(t),{signal:c});case 8:r=e.sent,e.next=18;break;case 11:if(e.prev=11,e.t0=e.catch(5),!(e.t0 instanceof DOMException)){e.next=15;break}return e.abrupt("return");case 15:return u(e.t0.message),a(!1),e.abrupt("return");case 18:if(200===r.status){e.next=23;break}u("Directory not found on host machine."),Q({}),e.next=29;break;case 23:return e.next=25,r.json();case 25:s=e.sent,(i=s.errors)&&u("There were errors analyzing ".concat(i.length," director").concat(i.length>1?"ies":"y"," inside of ").concat(t,". Please see ").concat(s.logFile," for more details. The table still shows all other directories.")),Q(s);case 29:a(!1);case 30:case"end":return e.stop()}}),e,null,[[5,11]])})));return function(t){return e.apply(this,arguments)}}(),[]);function Q(e){var t=e.entries,n=void 0===t?[]:t,c=e.totalSize,r=void 0===c?null:c,a=e.totalFiles,s=void 0===a?null:a,i=e.path,l=void 0===i?"":i;k(n),C(r),F(s),K(l)}function R(){L.abort(),a(!1),A(J)}function V(e){n&&R();var t=b.a.join(J,e);A(t),H(t)}return Object(r.useEffect)((function(){!function(){var e=Object(j.a)(o.a.mark((function e(){var t,n,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("http://localhost:8002/initialData");case 2:return t=e.sent,e.next=5,t.json();case 5:n=e.sent,c=n.initialPath,A(c),H(c);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[H]),Object(c.jsxs)("div",{className:"App",children:[Object(c.jsxs)("p",{id:"logo",children:["josh",Object(c.jsx)("strong",{children:"ls"})]}),Object(c.jsx)(f.a,{id:"pathInput",placeholder:"/path/to/directory/","aria-label":"absolute path to directory","aria-describedby":"basic-addon1",onChange:function(e){return A(e.target.value)},value:T,onKeyUp:function(e){"Enter"===e.key&&H(T)}}),n?Object(c.jsxs)(O.a,{variant:"danger",className:"actionBtn",onClick:R,children:["Cancel",Object(c.jsx)(x.a,{animation:"grow",size:"sm",id:"spinner"})]}):Object(c.jsx)(O.a,{variant:"info",className:"actionBtn",onClick:function(){return H(T)},children:"Analyze"}),l&&Object(c.jsxs)(h.a,{id:"errToast",role:"alert","aria-live":"assertive",children:[Object(c.jsxs)("div",{className:"toast-header",children:[Object(c.jsx)("strong",{className:"mr-auto",children:"Error"}),Object(c.jsx)("button",{type:"button",className:"ml-2 mb-1 close",onClick:function(){return u(null)},children:"\xd7"})]}),Object(c.jsx)("div",{className:"toast-body",children:l})]}),null!==w&&Object(c.jsxs)("div",{id:"content",children:[Object(c.jsxs)("div",{id:"directoryStats",children:[Object(c.jsxs)("span",{children:[Object(c.jsx)("strong",{children:z})," Files | ",Object(c.jsx)("strong",{children:m(w)})]}),Object(c.jsxs)("span",{id:"analyzedPath",children:["Current Directory: ",Object(c.jsx)("strong",{children:Object(c.jsx)("em",{children:J})})]})]}),Object(c.jsxs)(p.a,{striped:!0,hover:!0,size:"sm",children:[Object(c.jsx)("thead",{className:"thead-dark",children:Object(c.jsxs)("tr",{children:[Object(c.jsx)("th",{children:"Name"}),Object(c.jsx)("th",{children:"Size"}),Object(c.jsx)("th",{children:"Date Modified"}),Object(c.jsx)("th",{children:"Number of Files"})]})}),Object(c.jsxs)("tbody",{id:"tableBody",children:[Object(c.jsx)("tr",{children:Object(c.jsx)("td",{className:"clickable",colSpan:"4",onClick:function(){return V("..")},children:"\ud83d\udcc1 .."})}),g.map((function(e){var t=e.isDir?"\ud83d\udcc1":"\ud83d\udcc4";return Object(c.jsxs)("tr",{children:[Object(c.jsxs)("td",{className:e.isDir?"clickable":null,onClick:function(){return e.isDir?V(e.name):{}},children:[t," ",e.name]}),Object(c.jsx)("td",{children:m(e.size)}),Object(c.jsx)("td",{children:new Date(Date.parse(e.dateModified)).toLocaleString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric"})}),Object(c.jsx)("td",{children:e.numFiles})]},e.name)}))]})]})]})]})};i.a.render(Object(c.jsx)(a.a.StrictMode,{children:Object(c.jsx)(v,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.e9390630.chunk.js.map